# ---
# apiVersion: v1
# kind: ServiceAccount
# metadata:
#   name: my-app-sa
#   namespace: default
# ---
# apiVersion: rbac.authorization.k8s.io/v1
# kind: Role
# metadata:
#   name: my-app-role
#   namespace: default
# rules:
# - apiGroups: [""]
#   resources: ["pods"]
#   verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
# ---
# apiVersion: rbac.authorization.k8s.io/v1
# kind: RoleBinding
# metadata:
#   name: my-app-rolebinding
#   namespace: default
# roleRef:
#   apiGroup: rbac.authorization.k8s.io
#   kind: Role
#   name: my-app-role
# subjects:
# - kind: ServiceAccount
#   name: my-app-sa
#   namespace: default
# ---
# apiVersion: batch/v1
# kind: Job
# metadata:
#   name: failing-presync-hook
#   annotations:
#     argocd.argoproj.io/hook: PreSync
#     argocd.argoproj.io/hook-delete-policy: HookSucceeded
# spec:
#   template:
#     spec:
#       containers:
#       - name: fail-container
#         image: busybox
#         command: ["/bin/sh", "-c", "echo 'This job is designed to fail!'; exit 1"]
#       restartPolicy: Never
#       serviceAccountName: my-app-sa
#   backoffLimit: 0 # Ensure the job doesn't retry
# ---
# apiVersion: v1
# kind: Pod
# metadata:
#   name: my-app-pod
# spec:
#   containers:
#   - name: my-container
#     image: busybox
#     command: ["/bin/sh", "-c", "sleep 3600"]
#   serviceAccountName: my-app-sa
